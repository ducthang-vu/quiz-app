(this["webpackJsonpquiz-app"]=this["webpackJsonpquiz-app"]||[]).push([[0],{102:function(e,t,n){e.exports={container:"New_container__28boz",flex:"New_flex__3bL29","text-center":"New_text-center__2Avl6",form:"New_form__3bhgr",btn:"New_btn__1oByP"}},130:function(e,t,n){e.exports={container:"Game_container__2rDUz",flex:"Game_flex__1pOjL","text-center":"Game_text-center__14unJ",stepper:"Game_stepper__2lZvY"}},141:function(e,t,n){},142:function(e,t,n){},170:function(e,t,n){},172:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(43),o=n.n(c),i=(n(141),n(142),n(2));var s=function(){return Object(i.jsx)("header",{className:"main-header",children:Object(i.jsx)("h1",{children:"QuizApp!"})})},u=n(121),l=n.n(u);var j,b=function(){return Object(i.jsx)("footer",{className:"main-footer",children:Object(i.jsxs)("div",{className:"container flex",children:[Object(i.jsx)("p",{children:"Made by Thang"}),Object(i.jsx)("a",{href:"https://github.com/ducthang-vu/quizApp",children:Object(i.jsx)(l.a,{})})]})})},d=n(46),h=n(198);!function(e){e.FIVE="5",e.TEEN="10",e.FIFTEEN="15"}(j||(j={}));var O=n(202),p=n(203),f=n(204),m=n(205),x=n(200),v=n(199),_=Object(v.a)({formControl:{margin:"15px 0",color:"white",justifyContent:"center"},legend:{fontSize:"115%",color:"white",marginBottom:"10px"},radioGroup:{justifyContent:"center"},formControlLabel:{color:"white"}});function g(e){var t=e.legend,n=e.options,r=e.value,a=e.onChange,c=_();return Object(i.jsxs)(O.a,{component:"fieldset",className:c.formControl,children:[Object(i.jsx)(p.a,{component:"legend",className:c.legend,children:t}),Object(i.jsx)(f.a,{row:!0,"aria-label":"position",name:"position",value:r,onChange:function(e){return a(e.target.value)},className:c.radioGroup,children:n.map((function(e,t){return Object(i.jsx)(m.a,{value:e.value,className:c.formControlLabel,control:Object(i.jsx)(x.a,{color:"primary"}),label:e.label,labelPlacement:"top"},t)}))})]})}var E,N,w=n(102),y=n.n(w);!function(e){e.ANY="any difficulty",e.EASY="easy",e.MEDIUM="medium",e.HARD="hard"}(E||(E={})),function(e){e.MULTIPLE="multiple",e.BOOLEAN="boolean",e.BOTH="both"}(N||(N={}));var S,k=n(129),I=n.n(k),q=n(53),T=Object(q.b)({name:"questions",initialState:{entities:[],loading:!1,error:!1},reducers:{loadQuestions:function(e,t){e.entities=[],e.loading=!0},loadQuestionDone:function(e,t){e.loading=!1,e.entities=t.payload},loadQuestionError:function(e){e.loading=!1,e.error=!0}}}),C=T.actions,D=T.reducer,A=n(12),M=n(132);!function(e){e[e.MAIN=0]="MAIN",e[e.ENDGAME=1]="ENDGAME"}(S||(S={}));var L,B={score:0,phase:S.MAIN},F=Object(q.b)({name:"game",initialState:B,reducers:{addScore:function(e){e.score+=1},setPhase:function(e,t){e.phase=t.payload,t.payload===S.MAIN&&(e.score=0)}}}),Q=F.actions,R=F.reducer,U=n(201),P=n(197),G=n(88),H=n(89),z=n(29),K=n(72),Y=n.n(K),W=n(104),J=n(73),V=n(97),Z=n.n(V),$=n(195),X=n(128);!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.NO_RESULT=1]="NO_RESULT",e[e.INVALID=2]="INVALID",e[e.TOKEN_NOT_FOUND=3]="TOKEN_NOT_FOUND",e[e.TOKEN_TO_BE_REFRESHED=4]="TOKEN_TO_BE_REFRESHED"}(L||(L={}));var ee=Z.a.get("https://opentdb.com/api_token.php?command=request").pipe(Object(z.a)((function(e){return e.data.token})),Object($.a)((function(e){return window.localStorage.setItem("token",e)})));function te(e,t){return Object(J.a)(Object(J.a)({},e),{},{params:Object(J.a)(Object(J.a)({},e.params),{},{token:t})})}function ne(e){return re.apply(this,arguments)}function re(){return(re=Object(W.a)(Y.a.mark((function e(t){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.localStorage.getItem("token")){e.next=6;break}return console.warn("Retrieving new token."),e.next=5,ee.toPromise();case 5:n=e.sent;case 6:return e.abrupt("return",te(t,n));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(W.a)(Y.a.mark((function e(t){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(![L.TOKEN_NOT_FOUND,L.TOKEN_TO_BE_REFRESHED].includes(t.data.response_code)){e.next=4;break}return console.warn("Retrieving new token, then retry the http call."),n=function(e){return te(t.config,e)},e.abrupt("return",ee.pipe(Object(z.a)(n),Object(X.a)(Z.a.request)).toPromise());case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oe=function(){var e=Z.a.create({baseURL:"https://opentdb.com/api.php"});return e.interceptors.request.use(ne),e.interceptors.response.use(ae),e},ie=function(){function e(t){Object(G.a)(this,e),this.http=t}return Object(H.a)(e,[{key:"getQuestions",value:function(e){return e.type===N.BOTH&&delete e.type,e.difficulty===E.ANY&&delete e.difficulty,this.http.get("",{params:e}).pipe(Object(z.a)((function(e){return e.data.results})))}}],[{key:"getInstance",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,n=t();return new e(n)}}]),e}(),se=n(105),ue=n(196),le=n(56),je=Object(U.a)({dependencies:{questionsService:ie.getInstance()}}),be=Object(P.a)((function(e,t,n){var r=n.questionsService;return e.pipe(Object(se.a)(C.loadQuestions.match),Object(X.a)((function(e){return r.getQuestions(e.payload)})),Object(z.a)(C.loadQuestionDone),Object(ue.a)((function(){return Object(le.a)(C.loadQuestionError())})))})),de=n(71),he=Object(q.a)({reducer:{questions:D,game:R},middleware:[].concat(Object(M.a)(Object(q.c)({thunk:!1})),[je])}),Oe=function(){return Object(de.b)()},pe=de.c;function fe(){var e=Oe(),t=Object(A.g)();Object(r.useEffect)((function(){e(Q.setPhase(S.MAIN))}),[e]);var n=Object.values(j).map((function(e){return{value:e,label:e}})),a=Object.values(E).map((function(e){return{value:e,label:e.charAt(0).toUpperCase()+e.slice(1)}})),c=[{value:N.BOOLEAN,label:"True/False"},{value:N.MULTIPLE,label:"Multiple"},{value:N.BOTH,label:"Both"}],o=Object(r.useState)(n[0].value),s=Object(d.a)(o,2),u=s[0],l=s[1],b=Object(r.useState)(a[0].value),O=Object(d.a)(b,2),p=O[0],f=O[1],m=Object(r.useState)(c[0].value),x=Object(d.a)(m,2),v=x[0],_=x[1];return Object(i.jsx)("div",{className:"container",children:Object(i.jsxs)("form",{className:y.a.form,onSubmit:function(n){n.preventDefault();var r={amount:u,difficulty:p,type:v};t.push("/game"),e(C.loadQuestions(r))},children:[Object(i.jsx)("h2",{children:"Start a new game!"}),Object(i.jsx)(g,{legend:"Number of questions",options:n,value:u,onChange:l}),Object(i.jsx)(g,{legend:"Difficulty",options:a,value:p,onChange:f}),Object(i.jsx)(g,{legend:"Type",options:c,value:v,onChange:_}),Object(i.jsxs)(h.a,{type:"submit",className:y.a.btn,variant:"contained",size:"large",color:"primary",children:[Object(i.jsx)(I.a,{}),Object(i.jsx)("span",{children:"Start!"})]})]})})}je.run(be);var me=n(95),xe=n(206);var ve=function(){return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Fetching questions..."}),Object(i.jsx)("div",{children:Object(i.jsx)(xe.a,{color:"secondary"})})]})},_e=n(207),ge=(n(170),n(171));function Ee(e){var t=function(e){var t=e.question,n=t.correct_answer,r=t.incorrect_answers;return ge.shuffle(r.concat(n))},n=Object(r.useState)(t(e)),c=Object(d.a)(n,2),o=c[0],s=c[1];return Object(r.useEffect)((function(){s(t(e))}),[e]),Object(i.jsxs)("div",{className:"question-box",children:[Object(i.jsx)("h3",{className:"question-box__title",dangerouslySetInnerHTML:{__html:e.question.question}}),o.map((function(e,t){return Object(i.jsx)("button",{className:"question-box__btn answer-btn",onClick:function(){return s([e])},dangerouslySetInnerHTML:{__html:e}},t)})),1===o.length&&Object(i.jsxs)(a.a.Fragment,{children:[Object(i.jsx)("button",{className:"question-box__btn confirm-btn",onClick:function(){if(1!==o.length)throw new Error("More than one answer");e.answerQuestion(o[0]===e.question.correct_answer)},children:"CONFIRM"}),Object(i.jsx)("button",{className:"question-box__btn cancel-btn",onClick:function(){return s(t(e))},children:"Cancel"})]})]})}var Ne=n(130),we=n.n(Ne);function ye(){var e=Oe(),t=Object(A.g)(),n=pe((function(e){return e.questions.loading})),a=pe((function(e){return e.questions.entities})),c=pe((function(e){return e.questions.error})),o=Object(r.useReducer)((function(e){return++e}),0),s=Object(d.a)(o,2),u=s[0],l=s[1];Object(r.useEffect)((function(){c&&t.push("/")}),[t,c]);return n?Object(i.jsx)(ve,{}):Object(i.jsxs)("div",{className:"container",children:[Object(i.jsx)(_e.a,{variant:"progress",steps:a.length,position:"static",activeStep:u,className:we.a.stepper,backButton:"",nextButton:""}),Object(i.jsxs)("h2",{children:["Question ","".concat(u+1,"/").concat(a.length)," "]}),Object(i.jsx)(Ee,{question:a[u],answerQuestion:function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n&&e(Q.addScore()),u+1>=a.length?(e(Q.setPhase(S.ENDGAME)),t.push("/endgame")):l()}})]})}var Se=n(98),ke=n.n(Se);function Ie(){var e=pe((function(e){return e.game.score})),t=pe((function(e){return e.questions.entities})).length,n=pe((function(e){return e.game.phase})),r=Object(A.g)();return n!==S.ENDGAME&&r.push("/"),Object(i.jsx)("div",{className:"container text-center",children:Object(i.jsxs)("div",{className:ke.a.box,children:[Object(i.jsx)("h2",{children:"Congratulations!"}),Object(i.jsxs)("p",{className:ke.a.score,children:["Your score final score is: ",Object(i.jsxs)("span",{children:[e,"/",t]})]}),Object(i.jsx)(me.b,{to:"/",className:ke.a.btn,children:Object(i.jsx)(h.a,{variant:"contained",color:"primary",children:"Play again!"})})]})})}var qe=n(133),Te=n(131),Ce=function(e){Object(qe.a)(n,e);var t=Object(Te.a)(n);function n(e){var r;return Object(G.a)(this,n),(r=t.call(this,e)).intervalId=void 0,r.state={hasError:!1,timeout:5},r}return Object(H.a)(n,[{key:"tick",value:function(){this.setState((function(e){return{hasError:!0,timeout:Math.max(e.timeout-1,0)}}))}},{key:"componentDidCatch",value:function(e,t){console.error(e,t)}},{key:"componentDidMount",value:function(){var e=this;this.state.hasError&&(this.intervalId=window.setInterval((function(){return e.tick()}),1e3))}},{key:"componentDidUpdate",value:function(){var e=this;this.state.hasError&&(this.intervalId=window.setInterval((function(){return e.tick()}),1e3)),this.state.timeout<=0&&this.props.history.push("/")}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){var e=this.state,t=e.hasError,n=e.timeout;return t?Object(i.jsxs)("div",{className:"container",children:[Object(i.jsx)("h1",{children:"Something went wrong."}),Object(i.jsxs)("p",{children:["You will be redirect to home in ",n," seconds..."]})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(a.a.Component),De=Object(A.h)(Ce);var Ae=function(){return Object(i.jsxs)("div",{className:"app flex",children:[Object(i.jsx)(s,{}),Object(i.jsx)("main",{children:Object(i.jsx)(me.a,{basename:"/quizApp",children:Object(i.jsxs)(A.d,{children:[Object(i.jsx)(A.b,{exact:!0,path:"/",children:Object(i.jsx)(fe,{})}),Object(i.jsx)(A.b,{exact:!0,path:"/game",children:Object(i.jsx)(De,{children:Object(i.jsx)(ye,{})})}),Object(i.jsx)(A.b,{exact:!0,path:"/endgame",children:Object(i.jsx)(Ie,{})}),Object(i.jsx)(A.b,{path:"*",children:Object(i.jsx)(A.a,{to:"/"})})]})})}),Object(i.jsx)(b,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(i.jsx)(de.a,{store:he,children:Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(Ae,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},98:function(e,t,n){e.exports={container:"Endgame_container__BI0Ey",flex:"Endgame_flex__1SoW0","text-center":"Endgame_text-center__2L0Hf",box:"Endgame_box__3hRO8",score:"Endgame_score__146QQ",btn:"Endgame_btn__dPF2-"}}},[[172,1,2]]]);
//# sourceMappingURL=main.fc445506.chunk.js.map